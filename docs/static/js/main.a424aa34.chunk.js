(this.webpackJsonptsapp=this.webpackJsonptsapp||[]).push([[0],{367:function(e,t,n){},417:function(e,t){},419:function(e,t,n){},493:function(e,t,n){},494:function(e,t,n){},549:function(e,t,n){},550:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(74),s=n.n(c),i=(n(367),n(9)),o=n(18),l=n(25),d=n.n(l),u=n(39),j=n.n(u),p=n(26),b=n.n(p),h=n(75),m=n(346),O=n(53),x=n(604),f=n(289),g=n(107),v=n(608),y=n(605),C=n(603),k=n(556),S=n(290),w=n(341),F=n.n(w),N=n(599),I=n(3),_="YYYY-MM-DD";function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=d()(e,t);return 0!==n?n.toFixed(t):Object(I.jsxs)("span",{style:{opacity:"0.6"},children:["0",t>0?".":"",F()("0",t)]})}function D(e){var t=e.prop,n=e.title,a=e.collapsing,r=e.style,c=e.sort,s=e.onSort;return Object(I.jsx)(N.a.HeaderCell,{onClick:function(){return s(t)},style:r,collapsing:!!a,children:n+(c[0]===t?c[1]?" \u2193":" \u2191":"")})}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0&&t>0?d()(t/e*100,6):0}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0&&t>0?d()(t/e*100,6):0}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0&&t>0?d()(t/e,6):0}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0&&t>0?d()(t/e,6):0}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e>0?d()(n-t,6):-t}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e>0&&n>0?t>0?d()(a/n*100,6):-100:0}var P=n(19),V=n.n(P),M=n(34),Q=n(72),B=n.n(Q),$=n(48),G=n.n($),K=n(287),U=n.n(K),Y=j.a.get("tsapp.dataIndex")||{},J=j.a.get("tsapp.statsIndex")||{},q=j.a.get("tsapp.reportsIndex")||{};function W(){j.a.set("tsapp.dataIndex",Y),j.a.set("tsapp.statsIndex",J),j.a.set("tsapp.reportsIndex",q)}Y.campaigns||(Y.campaigns={}),Y.creatives||(Y.creatives={}),Y.adspots||(Y.adspots={}),Y.urls||(Y.urls={}),Y.conversions||(Y.conversions={}),q.campaingsList||(q.campaingsList={ttl:60,lastSync:{}}),q.campaingsCreatives||(q.campaingsCreatives={ttl:60,lastSync:{}}),q.campaingsCreativesStats||(q.campaingsCreativesStats={ttl:60,lastSync:{}}),q.campaingsAdspotsStats||(q.campaingsAdspotsStats={ttl:600,lastSync:{}}),q.creativeStats||(q.creativeStats={ttl:600,lastSync:{}});var X=Object(h.extendMoment)(b.a),Z=200,ee={"Content-Type":"application/json"};function te(){return(te=Object(M.a)(V.a.mark((function e(t,n,a,r){var c,s;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Date.now(),e.next=3,G()({method:"post",mode:"no-cors",url:"https://api.trafficstars.com/v1/auth/token",headers:Object(i.a)(Object(i.a)({},ee),{},{"Content-Type":"application/x-www-form-urlencoded"}),responseType:"json",data:U.a.stringify({grant_type:"password",client_id:t,client_secret:n,username:a,password:r}),changeOrigin:!0});case 3:return s=e.sent,e.abrupt("return",{token:s.data.access_token,tokenRefresh:s.data.refresh_token,ttl:c+1e3*s.data.expires_in});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(M.a)(V.a.mark((function e(t,n,a){var r,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Date.now(),e.next=3,G()({method:"post",url:"https://api.trafficstars.com/v1/auth/token",headers:Object(i.a)(Object(i.a)({},ee),{},{"Content-Type":"application/x-www-form-urlencoded"}),responseType:"json",data:U.a.stringify({grant_type:"refresh_token",client_id:t,client_secret:n,refresh_token:a}),changeOrigin:!0});case 3:return c=e.sent,e.abrupt("return",{token:c.data.access_token,tokenRefresh:c.data.refresh_token,ttl:r+1e3*c.data.expires_in});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return re.apply(this,arguments)}function re(){return(re=Object(M.a)(V.a.mark((function e(t){var n,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Date.now(),e.next=3,G.a.get("https://api.trafficstars.com/v1/campaign/list",{responseType:"json",headers:Object(i.a)(Object(i.a)({},ee),{},{Authorization:"bearer "+t}),params:{size:Z},changeOrigin:!0});case 3:if((a=e.sent).data.response&&a.data.response.length){e.next=6;break}return e.abrupt("return",null);case 6:a.data.response.forEach((function(e){Y.campaigns[e.id]=Object(i.a)(Object(i.a)({},e),{},{creatives:Y.campaigns[e.id]&&Y.campaigns[e.id].creatives||[],active:1===e.status,pending:0===e.status,rejected:4===e.status,lastSync:n})}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t){return se.apply(this,arguments)}function se(){return(se=Object(M.a)(V.a.mark((function e(t,n){var a,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now(),e.next=3,G.a.get("https://api.trafficstars.com/v1/banner/list",{responseType:"json",headers:Object(i.a)(Object(i.a)({},ee),{},{Authorization:"bearer "+t}),params:{campaign_id:n,size:Z},changeOrigin:!0});case 3:if((r=e.sent).data.response&&r.data.response.length){e.next=6;break}return e.abrupt("return",null);case 6:r.data.response.forEach((function(e){e&&e.id&&e.campaign_id&&e.image&&(Y.campaigns[e.campaign_id]&&(Y.campaigns[e.campaign_id].creatives?Y.campaigns[e.campaign_id].creatives.includes(e.id)||Y.campaigns[e.campaign_id].creatives.push(e.id):Y.campaigns[e.campaign_id].creatives=[e.id]),Y.creatives[e.id]=Object(i.a)(Object(i.a)({},e),{},{active:1===e.status,pending:0===e.status,rejected:4===e.status,lastSync:a}),Y.urls={},e.urls&&e.urls.length&&e.urls.forEach((function(e){if(!(e&&e.id&&e.url))return null;Y.urls[e.url]=e})))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(M.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t);case 2:return e.next=4,B.a.map(Object.entries(Y.campaigns),(function(e){var n=Object(o.a)(e,1)[0];return ce(t,n)}),{concurrency:6});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t,n,a){return le.apply(this,arguments)}function le(){return(le=Object(M.a)(V.a.mark((function e(t,n,a,r){var c,s,o,l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Date.now(),!r||a===r){e.next=6;break}return s=Array.from(X.range(X(a,_),X(r,_)).by("day")).map((function(e){return e.format(_)})),e.next=5,B.a.map(s,(function(e){return oe(t,n,e)}),{concurrency:1});case 5:return e.abrupt("return",null);case 6:if(!((o=a===X().format(_)||a===X().add(1,"d").format(_)?null:n+"-"+a)&&q.campaingsCreativesStats.lastSync[o]&&q.campaingsCreativesStats.lastSync[o]+1e3*q.campaingsCreativesStats.ttl>=c)){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,G.a.get("https://api.trafficstars.com/v1.1/advertiser/custom/report/by-creative",{responseType:"json",headers:Object(i.a)(Object(i.a)({},ee),{},{Authorization:"bearer "+t}),params:{campaign_id:n,date_from:a,date_to:a},changeOrigin:!0});case 11:if((l=e.sent).data&&l.data.length){e.next=14;break}return e.abrupt("return",null);case 14:J[a]||(J[a]={campaigns:{},creatives:{},adspots:{}}),l.data.forEach((function(e){e&&e.banner_id&&(J[a].creatives[e.banner_id]=Object(i.a)(Object(i.a)({},e),{},{lastSync:c}))})),o&&(q.campaingsCreativesStats.lastSync[o]=c);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t,n,a){return ue.apply(this,arguments)}function ue(){return(ue=Object(M.a)(V.a.mark((function e(t,n,a,r){var c,s,o,l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Date.now(),!r||a===r){e.next=6;break}return s=Array.from(X.range(X(a,_),X(r,_)).by("day")).map((function(e){return e.format(_)})),e.next=5,B.a.map(s,(function(e){return de(t,n,e)}),{concurrency:1});case 5:return e.abrupt("return",null);case 6:if(!((o=a===X().format(_)||a===X().add(1,"d").format(_)?null:n+"-"+a)&&q.campaingsAdspotsStats.lastSync[o]&&q.campaingsAdspotsStats.lastSync[o]+1e3*q.campaingsAdspotsStats.ttl>=c)){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,G.a.get("https://api.trafficstars.com/v1.1/advertiser/custom/report/by-spot",{responseType:"json",headers:Object(i.a)(Object(i.a)({},ee),{},{Authorization:"bearer "+t}),params:{campaign_id:n,date_from:a,date_to:a},changeOrigin:!0});case 11:l=e.sent,J[a]||(J[a]={campaigns:{},creatives:{},adspots:{}}),l.data.forEach((function(e){e&&e.spot_id&&(J[a].adspots[e.spot_id]=Object(i.a)(Object(i.a)({},e),{},{lastSync:c}))})),o&&(q.campaingsAdspotsStats.lastSync[o]=c);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e,t,n){return pe.apply(this,arguments)}function pe(){return(pe=Object(M.a)(V.a.mark((function e(t,n,a){var r,c,s,o;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Date.now(),!a||n===a){e.next=6;break}return c=Array.from(X.range(X(n,_),X(a,_)).by("day")).map((function(e){return e.format(_)})),e.next=5,B.a.map(c,(function(e){return je(t,e)}),{concurrency:1});case 5:return e.abrupt("return",null);case 6:if(!((s=n===X().format(_)||n===X().add(1,"d").format(_)?null:n)&&q.creativeStats.lastSync[s]&&q.creativeStats.lastSync[s]+1e3*q.creativeStats.ttl>=r)){e.next=9;break}return e.abrupt("return",null);case 9:return e.next=11,G.a.get("https://api.trafficstars.com/v1.1/advertiser/custom/report/by-creative",{responseType:"json",headers:Object(i.a)(Object(i.a)({},ee),{},{Authorization:"bearer "+t}),params:{date_from:n,date_to:n},changeOrigin:!0});case 11:if((o=e.sent).data&&o.data.length){e.next=14;break}return e.abrupt("return",null);case 14:J[n]||(J[n]={campaigns:{},creatives:{},adspots:{}}),o.data.forEach((function(e){e&&e.banner_id&&(J[n].creatives[e.banner_id]=Object(i.a)(Object(i.a)({},e),{},{lastSync:r}))})),s&&(q.creativeStats.lastSync[s]=r);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(){return(be=Object(M.a)(V.a.mark((function e(t,n){var a,r,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now(),e.next=3,G.a.put("https://api.trafficstars.com/v1/campaign/".concat(n,"/run"),{},{headers:Object(i.a)(Object(i.a)({},ee),{},{Authorization:"bearer "+t}),changeOrigin:!0});case 3:r=e.sent,(c=r.data)&&c.id&&(Y.campaigns[c.id]=Object(i.a)(Object(i.a)({},c),{},{active:1===c.status,pending:0===c.status,rejected:4===c.status,lastSync:a}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return(he=Object(M.a)(V.a.mark((function e(t,n){var a,r,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now(),e.next=3,G.a.put("https://api.trafficstars.com/v1/campaign/".concat(n,"/pause"),{},{headers:Object(i.a)(Object(i.a)({},ee),{},{Authorization:"bearer "+t}),changeOrigin:!0});case 3:r=e.sent,(c=r.data)&&c.id&&(Y.campaigns[c.id]=Object(i.a)(Object(i.a)({},c),{},{active:1===c.status,pending:0===c.status,rejected:4===c.status,lastSync:a}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){return(me=Object(M.a)(V.a.mark((function e(t,n){var a,r,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now(),e.next=3,G.a.put("https://api.trafficstars.com/v1/banner/".concat(n,"/run"),{},{headers:Object(i.a)(Object(i.a)({},ee),{},{Authorization:"bearer "+t}),changeOrigin:!0});case 3:r=e.sent,(c=r.data.response)&&c.id&&(Y.creatives[c.id]=Object(i.a)(Object(i.a)({},c),{},{active:1===c.status,pending:0===c.status,rejected:4===c.status,lastSync:a}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){return(Oe=Object(M.a)(V.a.mark((function e(t,n){var a,r,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now(),e.next=3,G.a.put("https://api.trafficstars.com/v1/banner/".concat(n,"/pause"),{},{headers:Object(i.a)(Object(i.a)({},ee),{},{Authorization:"bearer "+t}),changeOrigin:!0});case 3:r=e.sent,(c=r.data.response)&&c.id&&(Y.creatives[c.id]=Object(i.a)(Object(i.a)({},c),{},{active:1===c.status,pending:0===c.status,rejected:4===c.status,lastSync:a}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){return(xe=Object(M.a)(V.a.mark((function e(t,n,a,r){var c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G()("https://smartlink.clickdealer.com/affiliates/api/1/reports.asmx/Conversions?api_key=".concat(t,"&affiliate_id=142387&start_date=10%2F24%2F2021%2000%3A00%3A00&end_date=10%2F25%2F2021%2023%3A59%3A59&include_tests=False&row_limit=100&currency_id=All&disposition_type=All&conversion_type=All&update_filter=False"),{method:"GET",headers:Object(i.a)({},ee),mode:"no-cors",crossdomain:!0});case 2:c=e.sent,console.log(c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe={auth:function(e,t,n,a){return te.apply(this,arguments)},authRefresh:function(e,t,n){return ne.apply(this,arguments)},getCampaigns:ae,getCampaignCreatives:ce,getCampaignsAndCreatives:function(e){return ie.apply(this,arguments)},getCampaignCreativesStats:oe,getCampaignAdspotsStats:de,getCreativesStats:je,runCampaign:function(e,t){return be.apply(this,arguments)},pauseCampaign:function(e,t){return he.apply(this,arguments)},runCreative:function(e,t){return me.apply(this,arguments)},pauseCreative:function(e,t){return Oe.apply(this,arguments)},getConversions:function(e,t,n,a){return xe.apply(this,arguments)},getImageUrl:function(e){return"https://admin.trafficstars.com/media/"+e}},ge=(n(419),n(143)),ve=n.n(ge),ye=n(601),Ce=n(551),ke=n(606),Se=n(602),we=n(147),Fe=n(144),Ne=(n(493),n(47)),Ie=n.n(Ne),_e=n(600),Ae=n(343);n(494);var De=function(e){var t=e.stats;return t?Object(I.jsxs)("div",{style:{textAlign:"center"},children:[Ie()(t.impressions)&&Object(I.jsxs)(Ae.a,{size:"mini",style:{marginRight:"20px"},children:[Object(I.jsx)(Ae.a.Value,{children:t.impressions.toLocaleString()}),Object(I.jsx)(Ae.a.Label,{children:"Impressions"})]}),Ie()(t.clicks)&&Object(I.jsxs)(Ae.a,{size:"mini",style:{marginRight:"20px"},children:[Object(I.jsx)(Ae.a.Value,{children:t.clicks.toLocaleString()}),Object(I.jsx)(Ae.a.Label,{children:"Clicks"})]}),Ie()(t.leads)&&Object(I.jsxs)(Ae.a,{size:"mini",style:{marginRight:"20px"},children:[Object(I.jsx)(Ae.a.Value,{children:t.leads.toLocaleString()}),Object(I.jsx)(Ae.a.Label,{children:"Leads"})]}),Ie()(t.ctr)&&Object(I.jsxs)(Ae.a,{size:"mini",style:{marginRight:"20px"},children:[Object(I.jsxs)(Ae.a.Value,{children:[t.ctr.toFixed(3),"%"]}),Object(I.jsx)(Ae.a.Label,{children:"CTR"})]}),Ie()(t.cr)&&Object(I.jsxs)(Ae.a,{size:"mini",style:{marginRight:"20px"},children:[Object(I.jsxs)(Ae.a.Value,{children:[t.cr.toFixed(3),"%"]}),Object(I.jsx)(Ae.a.Label,{children:"CR"})]}),Ie()(t.ecpc)&&Object(I.jsxs)(Ae.a,{size:"mini",style:{marginRight:"20px"},children:[Object(I.jsxs)(Ae.a.Value,{children:[t.ecpc.toFixed(3),"$"]}),Object(I.jsx)(Ae.a.Label,{children:"ECPC"})]}),Ie()(t.ecpa)&&Object(I.jsxs)(Ae.a,{size:"mini",style:{marginRight:"20px"},children:[Object(I.jsxs)(Ae.a.Value,{children:[t.ecpa.toFixed(3),"$"]}),Object(I.jsx)(Ae.a.Label,{children:"ECPA"})]}),Ie()(t.price)&&Object(I.jsxs)(Ae.a,{size:"mini",style:{marginRight:"20px"},children:[Object(I.jsxs)(Ae.a.Value,{children:[t.price.toFixed(3).toLocaleString(),"$"]}),Object(I.jsx)(Ae.a.Label,{children:"Price"})]}),Ie()(t.income)&&Object(I.jsxs)(Ae.a,{size:"mini",style:{marginRight:"20px"},color:t.income>0?"green":"red",children:[Object(I.jsxs)(Ae.a.Value,{children:[t.income.toFixed(3).toLocaleString(),"$"]}),Object(I.jsx)(Ae.a.Label,{children:"Income"})]}),Ie()(t.revenue)&&Object(I.jsxs)(Ae.a,{size:"mini",style:{marginRight:"20px"},color:t.revenue>0?"green":"red",children:[Object(I.jsxs)(Ae.a.Value,{children:[t.revenue.toFixed(3).toLocaleString(),"$"]}),Object(I.jsx)(Ae.a.Label,{children:"Revenue"})]}),Ie()(t.roi)&&Object(I.jsxs)(Ae.a,{size:"mini",color:t.roi>16?"green":t.roi>0?"orange":"red",children:[Object(I.jsxs)(Ae.a.Value,{children:[t.roi.toFixed(3),"%"]}),Object(I.jsx)(Ae.a.Label,{children:"ROI"})]})]}):Object(I.jsx)("div",{style:{textAlign:"center"},children:Object(I.jsx)(_e.a,{fluid:!0,children:Object(I.jsxs)(_e.a.Paragraph,{children:[Object(I.jsx)(_e.a.Line,{}),Object(I.jsx)(_e.a.Line,{}),Object(I.jsx)(_e.a.Line,{}),Object(I.jsx)(_e.a.Line,{})]})})})},Le=Object(h.extendMoment)(b.a);var Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.switchStamp,n=e.auth,r=e.dates,c=e.setDates,s=e.searchQuery,l=e.setSearchQuery,u=Object(a.useState)({rows:[],rowsCount:-1}),p=Object(o.a)(u,2),b=p[0],h=p[1],x=Object(a.useState)(!1),v=Object(o.a)(x,2),y=v[0],C=v[1],w=Object(a.useState)(null),F=Object(o.a)(w,2),P=F[0],Q=F[1],$=Object(a.useState)({}),G=Object(o.a)($,2),K=G[0],U=G[1],q=Object(a.useState)({}),X=Object(o.a)(q,2),Z=X[0],ee=X[1],te=j.a.get("tsapp.campaigns.filter")||{},ne=Object(a.useState)([te.sortProp||"cr",te.sortValue||!1]),ae=Object(o.a)(ne,2),re=ae[0],ce=ae[1],se=Object(a.useState)("all"),ie=Object(o.a)(se,2),oe=ie[0],le=ie[1];function de(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];C(!0),(e?B.a.all([fe.getCampaignsAndCreatives(n.token),fe.getCreativesStats(n.token,r.from,r.to)]):B.a.all([B.a.resolve(Object.entries(Y.campaigns).map((function(e){var t=Object(o.a)(e,2);t[0];return t[1]}))),fe.getCreativesStats(n.token,r.from,r.to)])).then(Object(M.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=Object.entries(Y.campaigns).map((function(e){var t=Object(o.a)(e,2);t[0];return t[1]}))).length&&W(),h({rows:t,rowsCount:t.length}),C(!1);case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e),h({rows:[],rowsCount:-1});var t=e.toString();Q(t),C(!1)}))}function ue(e){ce([e,re[0]===e&&!re[1]])}function je(e){K[e]?delete K[e]:K[e]=!0,U(Object(i.a)({},K))}function pe(e){Z[e]?delete Z[e]:Z[e]=!0,ee(Object(i.a)({},Z))}function be(e){C(!0),fe.runCampaign(n.token,e).then((function(){return de(!0)})).catch((function(e){Q(e.toString()),C(!1)}))}function he(e){C(!0),fe.pauseCampaign(n.token,e).then((function(){return de(!0)})).catch((function(e){Q(e.toString()),C(!1)}))}function me(e){C(!0),fe.runCreative(n.token,e).then((function(){return de(!0)})).catch((function(e){Q(e.toString()),C(!1)}))}function Oe(e){C(!0),fe.pauseCreative(n.token,e).then((function(){return de(!0)})).catch((function(e){Q(e.toString()),C(!1)}))}Object(a.useEffect)((function(){return y||P||!n||!n.token?null:b.rowsCount<0?(de(0===t),null):void 0}));var xe={impressions:0,clicks:0,leads:0,price:0,income:0,ctr:0,cr:0,ecpc:0,ecpa:0,revenue:0,roi:0},ge=Array.from(Le.range(Le(r.from,_),Le(r.to,_)).by("day")).map((function(e){return e.format(_)})),Ne=0,Ie=[],_e=[];return b&&b.rows&&b.rows.length&&b.rows.forEach((function(e){switch(oe){case"active":case"active-all":if(!e.active)return null;break;case"disabled":if(e.active)return null;break;case"pending":if(!e.pending)return null}if(s&&!~(e.id+"").indexOf(s.toLowerCase())&&!~e.name.toLowerCase().indexOf(s.toLowerCase()))return null;var t=[],n=[],a=e&&e.creatives&&e.creatives.length?e.creatives.length:0;e.impressions=0,e.clicks=0,e.leads=0,e.price=0,e.income=0,a>0&&e.creatives.forEach((function(t){var a=Y.creatives[t];if(!a)return null;switch(oe){case"active-all":if(!a.active)return null}a.impressions=0,a.clicks=0,a.leads=0,a.price=0,a.income=0,ge.forEach((function(e){if(!J[e]||!J[e].creatives[t])return null;var n=J[e].creatives[t];a.impressions+=n.impressions,a.clicks+=n.clicks,a.leads+=n.leads,a.price+=n.amount,a.income+=n.lead_price})),Z["b-"+t]||(e.impressions+=a.impressions,e.clicks+=a.clicks,e.leads+=a.leads,e.price+=a.price,e.income+=a.income),a.ctr=L(a.impressions,a.clicks),a.cr=R(a.clicks,a.leads),a.ecpc=z(a.clicks,a.price),a.ecpa=T(a.leads,a.price),a.revenue=H(a.impressions,a.price,a.income),a.roi=E(a.impressions,a.leads,a.price,a.revenue),n.push(a)})),e.ctr=L(e.impressions,e.clicks),e.cr=R(e.clicks,e.leads),e.ecpc=z(e.clicks,e.price),e.ecpa=T(e.leads,e.price),e.revenue=H(e.leads,e.price,e.income),e.roi=E(e.impressions,e.leads,e.price,e.revenue),Ie.push(Object(i.a)(Object(i.a)({},e),{},{campaignIndex:Ne++})),Z["c-"+e.id]||(xe.impressions+=e.impressions,xe.clicks+=e.clicks,xe.leads+=e.leads,xe.price+=e.price,xe.income+=e.income),t.push(Object(I.jsxs)(N.a.Row,{style:{textDecoration:Z["c-"+e.id]?"line-through":""},warning:!e.active||e.pending,active:!!K["c-"+e.id],children:[Object(I.jsx)(N.a.Cell,{className:"tac",children:e.pending?Object(I.jsx)(ye.a,{active:!0,inline:!0,size:"mini"}):Object(I.jsx)(S.a,{toggle:!0,checked:!!e.active,onClick:function(){return e.active?he(e.id):be(e.id)}})}),Object(I.jsx)(N.a.Cell,{className:"monoFont",style:{cursor:a&&"pointer"},onClick:function(){return a&&je("c-"+e.id)},children:e.id}),Object(I.jsxs)(N.a.Cell,{className:"monoFont",style:{cursor:a&&"pointer"},onClick:function(){return a&&je("c-"+e.id)},children:[e&&e.countries&&e.countries.length>0&&e.countries.map((function(e){return Object(I.jsx)(Ce.a,{name:e.toLowerCase()},"countryCode-"+e)})),a?Object(I.jsx)("b",{children:e.name}):e.name]}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.impressions/1e3,3)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.clicks,0)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.leads,0)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.ctr,2)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.cr,2)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.price,3)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.income,3)}),Object(I.jsxs)(N.a.Cell,{className:"tar monoFont",positive:e.revenue>0,negative:e.revenue<0,children:[e.revenue>0?"+":"",A(e.revenue,3)]}),Object(I.jsxs)(N.a.Cell,{className:"tar monoFont",style:{cursor:"pointer"},positive:e.roi>0,negative:e.roi<0,onClick:function(){return pe("c-"+e.id)},children:[e.roi>0?"+":"",A(e.roi,2)]})]},"campaign-"+e.id)),a&&K["c-"+e.id]&&ve()(n,re[0],re[1]?"asc":"desc").forEach((function(n){var a=n.urls.filter((function(e){return e&&1===e.status&&e.id&&e.url})),r=fe.getImageUrl(n.image);t.push(Object(I.jsxs)(N.a.Row,{warning:!n.active||n.pending,style:{fontSize:"0.8em",textDecoration:Z["b-"+n.id]?"line-through":""},children:[Object(I.jsx)(N.a.Cell,{className:"tac",children:n.pending?Object(I.jsx)(ye.a,{active:!0,inline:!0,size:"mini"}):n.rejected?Object(I.jsx)(g.a,{color:"red",style:{margin:"0 5px 0 0",padding:"2px"},size:"tiny",icon:"warning"}):Object(I.jsx)(S.a,{slider:!0,disabled:!(e&&e.active),checked:!!(e&&e.active&&n.active),onClick:function(){return e&&e.active&&n.active?Oe(n.id):me(n.id)}})}),Object(I.jsxs)(N.a.Cell,{className:"monoFont",children:["\u21b3","\u2009",n.id]}),Object(I.jsxs)(N.a.Cell,{className:"monoFont",children:[Object(I.jsx)(ke.a,{position:"right center",flowing:!0,hoverable:!0,trigger:Object(I.jsx)(g.a,{color:"blue",style:{margin:"0 5px 0 0",padding:"2px"},size:"tiny",icon:"image"}),children:Object(I.jsx)(Se.a.Group,{children:Object(I.jsxs)(Se.a,{children:[Object(I.jsx)(Se.a.Avatar,{href:r,title:r,alt:r,rel:"noreferrer",target:"_blank",src:r}),Object(I.jsxs)(Se.a.Content,{children:[Object(I.jsx)("span",{className:"author",children:n.brandname}),Object(I.jsxs)(Se.a.Text,{style:{margin:"0",padding:"0"},children:[Object(I.jsx)("p",{style:{marginBottom:"3px"},children:n.headline}),a.length>0&&Object(I.jsx)("ul",{style:{margin:"0",padding:"0"},children:a.map((function(e){return Object(I.jsx)("li",{style:{listStyle:"none"},children:Object(I.jsx)("a",{href:e.url,title:e.url,alt:e.url,rel:"noreferrer",target:"_blank",children:e.id})},e)}))})]})]})]})})}),n.brandname]}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.impressions/1e3,3)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.clicks,0)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.leads,0)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.ctr,2)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.cr,2)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.price,3)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.income,3)}),Object(I.jsxs)(N.a.Cell,{className:"tar monoFont",positive:n.revenue>0,negative:n.revenue<0,children:[n.revenue>0?"+":"",A(n.revenue,3)]}),Object(I.jsxs)(N.a.Cell,{className:"tar monoFont",style:{cursor:"pointer"},positive:n.roi>0,negative:n.roi<0,onClick:function(){return pe("b-"+n.id)},children:[n.revenue>0?"+":"",A(n.roi,2)]})]},"campaign-"+e.id+"-creative-"+n.id))})),_e.push(t)})),xe.ctr=L(xe.impressions,xe.clicks),xe.cr=R(xe.clicks,xe.leads),xe.ecpc=z(xe.clicks,xe.price),xe.ecpa=T(xe.leads,xe.price),xe.revenue=H(xe.impressions,xe.price,xe.income),xe.roi=E(xe.impressions,xe.leads,xe.price,xe.revenue),Object(I.jsxs)(I.Fragment,{children:[P&&Object(I.jsxs)(f.a,{inverted:!0,color:"red",onClick:function(){return Q(null)},children:[Object(I.jsx)(g.a,{onClick:function(){return Q(null)},floated:"right",color:"red",icon:"close",size:"tiny",style:{marginTop:"-6px"}}),Object(I.jsx)("p",{children:P})]}),Object(I.jsx)(De,{stats:b.rowsCount>0&&xe}),Object(I.jsxs)(f.a,{loading:y,style:{padding:"0",border:"0"},children:[Object(I.jsxs)(m.a,{attached:"top",children:[Object(I.jsxs)(m.a.Item,{children:[Object(I.jsx)(Fe.DateInput,{style:{width:"133px"},disabled:y,placeholder:"Date From",dateFormat:_,value:r.from,iconPosition:"left",maxDate:r.to,onChange:function(e,t){return c(Object(i.a)(Object(i.a)({},r),{},{from:t.value}))}}),Object(I.jsx)(Fe.DateInput,{style:{width:"133px",marginLeft:"5px"},disabled:y,placeholder:"Date To",dateFormat:_,value:r.to,iconPosition:"left",minDate:r.from,maxDate:Le().format(_),onChange:function(e,t){return c(Object(i.a)(Object(i.a)({},r),{},{to:t.value}))}})]}),Object(I.jsx)(m.a.Item,{children:Object(I.jsx)(we.a,{placeholder:"State",compact:!0,style:{width:"120px"},onChange:function(e,t){return le(t.value)},value:oe,selection:!0,options:[{key:"all",text:"All",value:"all"},{key:"active",text:"Active",value:"active"},{key:"active-all",text:"Active All",value:"active-all"},{key:"disabled",text:"Disabled",value:"disabled"},{key:"pending",text:"Pending",value:"pending"}]})}),Object(I.jsxs)(m.a.Menu,{position:"right",children:[Object(I.jsx)(m.a.Item,{children:Object(I.jsx)(k.a,{placeholder:"Search",style:{width:"240px"},value:s,onChange:function(e){return l(e.target.value)}})}),Object(I.jsxs)(m.a.Item,{disabled:y,onClick:function(){return de(!0)},children:[Object(I.jsx)(O.a,{name:"refresh",color:"violet"}),"Load Data"]}),Object(I.jsxs)(m.a.Item,{disabled:y,onClick:function(){return de()},children:[Object(I.jsx)(O.a,{name:"refresh",color:"blue"}),"Load Stats"]})]})]}),Object(I.jsxs)(N.a,{compact:!0,striped:!0,sortable:!0,celled:!0,selectable:!0,attached:"bottom",children:[Object(I.jsx)(N.a.Header,{children:Object(I.jsxs)(N.a.Row,{children:[Object(I.jsx)(D,{sort:re,onSort:ue,style:{width:"50px"},prop:"active",title:"Active"}),Object(I.jsx)(D,{sort:re,onSort:ue,style:{width:"80px"},prop:"id",title:"ID"}),Object(I.jsx)(D,{sort:re,onSort:ue,prop:"name",title:"Name"}),Object(I.jsx)(D,{sort:re,onSort:ue,style:{width:"90px"},prop:"impressions",title:"Imprs"}),Object(I.jsx)(D,{sort:re,onSort:ue,style:{width:"85px"},prop:"clicks",title:"Clicks"}),Object(I.jsx)(D,{sort:re,onSort:ue,style:{width:"85px"},prop:"leads",title:"Leads"}),Object(I.jsx)(D,{sort:re,onSort:ue,style:{width:"85px"},prop:"ctr",title:"CTR %"}),Object(I.jsx)(D,{sort:re,onSort:ue,style:{width:"85px"},prop:"cr",title:"CR %"}),Object(I.jsx)(D,{sort:re,onSort:ue,style:{width:"85px"},prop:"price",title:"Price"}),Object(I.jsx)(D,{sort:re,onSort:ue,style:{width:"85px"},prop:"income",title:"Income"}),Object(I.jsx)(D,{sort:re,onSort:ue,style:{width:"85px"},prop:"revenue",title:"Revenue"}),Object(I.jsx)(D,{sort:re,onSort:ue,style:{width:"85px"},prop:"roi",title:"ROI %"})]})}),Object(I.jsx)(N.a.Body,{children:ve()(Ie,re[0],re[1]?"asc":"desc").map((function(e){return _e[e.campaignIndex]}))}),Object(I.jsx)(N.a.Footer,{children:Object(I.jsxs)(N.a.Row,{children:[Object(I.jsxs)(N.a.HeaderCell,{colSpan:3,children:["Count: ",Ie.length]}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:d()(xe.impressions/1e3,3).toFixed(3)}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:xe.clicks}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:xe.leads}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:xe.ctr.toFixed(2)}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:xe.cr.toFixed(2)}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:d()(xe.price,3).toFixed(3)}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:d()(xe.income,3).toFixed(3)}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:(xe.revenue>0?"+":"")+d()(xe.revenue,3).toFixed(3)}),Object(I.jsxs)(N.a.HeaderCell,{className:"tar monoFont",children:[(xe.roi>0?"+":"")+d()(xe.roi,2),"%"]})]})})]})]})]})},ze=n(227),Te=(n(549),Object(h.extendMoment)(b.a));var He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.switchStamp,n=e.auth,r=e.dates,c=e.setDates,s=e.searchQuery,l=e.setSearchQuery,u=Object(a.useState)({rows:[],rowsCount:-1}),p=Object(o.a)(u,2),b=p[0],h=p[1],x=Object(a.useState)(!1),v=Object(o.a)(x,2),y=v[0],C=v[1],w=Object(a.useState)(null),F=Object(o.a)(w,2),P=F[0],V=F[1],M=Object(a.useState)({}),Q=Object(o.a)(M,2),B=Q[0],$=Q[1],G=Object(a.useState)({}),K=Object(o.a)(G,2),U=K[0],q=K[1],X=j.a.get("tsapp.banners.filter")||{},Z=Object(a.useState)([X.sortProp||"cr",X.sortValue||!1]),ee=Object(o.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useState)("all"),re=Object(o.a)(ae,2),ce=re[0],se=re[1];function ie(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];C(!0),(e?Promise.all([fe.getCampaignsAndCreatives(n.token),fe.getCreativesStats(n.token,r.from,r.to)]):fe.getCreativesStats(n.token,r.from,r.to)).then((function(){var e=Object.entries(Y.creatives).map((function(e){var t=Object(o.a)(e,2);t[0];return t[1]}));e.length&&W(),h({rows:e,rowsCount:e.length}),C(!1)})).catch((function(e){console.error(e),h({rows:[],rowsCount:-1});var t=e.toString();V(t),C(!1)}))}function oe(e){ne([e,te[0]===e&&!te[1]])}function le(e){B[e]?delete B[e]:B[e]=!0,$(Object(i.a)({},B))}function de(e){U[e]?delete U[e]:U[e]=!0,q(Object(i.a)({},U))}function ue(e){C(!0),fe.runCreative(n.token,e).then((function(){return ie(!0)})).catch((function(e){V(e.toString()),C(!1)}))}function je(e){C(!0),fe.pauseCreative(n.token,e).then((function(){return ie(!0)})).catch((function(e){V(e.toString()),C(!1)}))}Object(a.useEffect)((function(){return y||P||!n||!n.token?null:b.rowsCount<0?(ie(0===t),null):void 0}));var pe={impressions:0,clicks:0,leads:0,price:0,income:0,ctr:0,cr:0,ecpc:0,ecpa:0,revenue:0,roi:0},be=Array.from(Te.range(Te(r.from,_),Te(r.to,_)).by("day")).map((function(e){return e.format(_)})),he=0,me=[],Oe={},xe=[];return b.rows.forEach((function(e){var t,n=e&&e.id;if(!n||!Y.creatives[n])return null;if(e.campaign_id&&(t=Y.campaigns[e.campaign_id]),"all"!==ce)switch(ce){case"active":if(!e.active||e.pending||!t||!t.active)return null;break;case"disabled":if(e.active||e.pending||!t||!t.active)return null;break;case"pending":if(!e||!e.pending)return null}if(s){var a=s.toLowerCase();if(!~(e.id+"").indexOf(a)&&!~e.brandname.toLowerCase().indexOf(a)&&!~e.headline.toLowerCase().indexOf(a)&&t&&!~t.name.toLowerCase().indexOf(a))return null}var r=he++,c=fe.getImageUrl(e.image);e.impressions=0,e.clicks=0,e.leads=0,e.price=0,e.income=0,e.ctr=0,e.cr=0,e.ecpc=0,e.ecpa=0,e.revenue=0,e.roi=0,be.forEach((function(t){if(!J[t]||!J[t].creatives[n])return null;var a=J[t].creatives[n];e.impressions+=a.impressions,e.clicks+=a.clicks,e.leads+=a.leads,e.price+=a.amount,e.income+=a.lead_price})),e.ctr=L(e.impressions,e.clicks),e.cr=R(e.clicks,e.leads),e.ecpc=z(e.clicks,e.price),e.ecpa=T(e.leads,e.price),e.revenue=H(e.impressions,e.price,e.income),e.roi=E(e.impressions,e.leads,e.price,e.revenue),Oe[c]?Oe[c].creatives[n]=e:Oe[c]={bannerIndex:r,imageUrl:c,creatives:Object(ze.a)({},n,e)}})),Object.keys(Oe).forEach((function(e,t){var n=Oe[e];n.impressions=0,n.clicks=0,n.leads=0,n.price=0,n.income=0,n.ctr=0,n.cr=0,n.ecpc=0,n.ecpa=0,n.revenue=0,n.roi=0,n.creatives=Object.entries(n.creatives).map((function(e){var t=Object(o.a)(e,2),a=t[0],r=t[1];return B["c-"+a]||(n.impressions+=r.impressions,n.clicks+=r.clicks,n.leads+=r.leads,n.price+=r.price,n.income+=r.income),r})),n.ctr=L(n.impressions,n.clicks),n.cr=R(n.clicks,n.leads),n.ecpc=z(n.clicks,n.price),n.ecpa=T(n.leads,n.price),n.revenue=H(n.impressions,n.price,n.income),n.roi=E(n.impressions,n.leads,n.price,n.revenue),B["bi-"+e]||(pe.impressions+=n.impressions,pe.clicks+=n.clicks,pe.leads+=n.leads,pe.price+=n.price,pe.income+=n.income),me.push(Object(i.a)(Object(i.a)({},n),{},{bannerIndex:t}));var a=[Object(I.jsxs)(N.a.Row,{style:{textDecoration:B["bi-"+e]?"line-through":""},active:!!U["bi-"+e],children:[Object(I.jsxs)(N.a.Cell,{colSpan:3,className:"monoFont",style:{cursor:"pointer"},onClick:function(){return de("bi-"+e)},children:[Object(I.jsx)(ke.a,{position:"right center",flowing:!0,hoverable:!0,trigger:Object(I.jsx)(g.a,{color:"blue",style:{margin:"3px 5px 2px 2px",padding:"4px"},size:"tiny",icon:"image"}),children:Object(I.jsx)(Se.a.Group,{children:Object(I.jsx)(Se.a,{children:Object(I.jsx)(Se.a.Avatar,{href:e,title:e,alt:e,rel:"noreferrer",target:"_blank",src:e})})})}),"/"+e.split("/").slice(-5).join("/")]}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.impressions/1e3,3)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.clicks,0)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.leads,0)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.ctr,2)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.cr,2)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.price,3)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(n.income,3)}),Object(I.jsxs)(N.a.Cell,{className:"tar monoFont",positive:n.revenue>0,negative:n.revenue<0,children:[n.revenue>0?"+":"",A(n.revenue,3)]}),Object(I.jsxs)(N.a.Cell,{className:"tar monoFont",style:{cursor:"pointer"},positive:n.roi>0,negative:n.roi<0,onClick:function(){return le("bi-"+e)},children:[n.revenue>0?"+":"",A(n.roi,2)]})]},"bannerImage-"+n.id)];U["bi-"+e]&&ve()(n.creatives,te[0],te[1]?"asc":"desc").forEach((function(e){var t,n=e.urls.filter((function(e){return e&&1===e.status&&e.id&&e.url}));e.campaign_id&&(t=Y.campaigns[e.campaign_id]),a.push(Object(I.jsxs)(N.a.Row,{warning:!e.active||e.pending||!t||!t.active,style:{fontSize:"0.8em",textDecoration:B["c-"+e.id]?"line-through":""},children:[Object(I.jsx)(N.a.Cell,{className:"tac",children:e.pending?Object(I.jsx)(ye.a,{active:!0,inline:!0,size:"mini"}):e.rejected?Object(I.jsx)(g.a,{color:"red",style:{margin:"0 5px 0 0",padding:"2px"},size:"tiny",icon:"warning"}):Object(I.jsx)(S.a,{slider:!0,disabled:!(t&&t.active),checked:!!(t&&t.active&&e.active),onClick:function(){return t&&t.active&&e.active?je(e.id):ue(e.id)}})}),Object(I.jsxs)(N.a.Cell,{className:"monoFont",children:["\u21b3","\u2009",e.id]}),Object(I.jsxs)(N.a.Cell,{className:"monoFont",children:[t&&t.countries&&t.countries.length>0&&t.countries.map((function(e){return Object(I.jsx)(Ce.a,{name:e.toLowerCase()},"countryCode-"+e)})),t&&Object(I.jsx)("b",{children:t.name}),"\xa0",Object(I.jsx)(ke.a,{position:"right center",flowing:!0,hoverable:!0,trigger:Object(I.jsx)(g.a,{color:"blue",style:{margin:"0 5px 0 0",padding:"2px"},size:"tiny",icon:"info"}),children:Object(I.jsx)(Se.a.Group,{children:Object(I.jsx)(Se.a,{children:Object(I.jsxs)(Se.a.Content,{children:[Object(I.jsx)("span",{className:"author",children:e.brandname}),Object(I.jsxs)(Se.a.Text,{style:{margin:"0",padding:"0"},children:[Object(I.jsx)("p",{style:{marginBottom:"3px"},children:e.headline}),n.length>0&&Object(I.jsx)("ul",{style:{margin:"0",padding:"0"},children:n.map((function(e){return Object(I.jsx)("li",{style:{listStyle:"none"},children:Object(I.jsx)("a",{href:e.url,title:e.url,alt:e.url,rel:"noreferrer",target:"_blank",children:e.id})},e)}))})]})]})})})}),Object(I.jsx)("i",{children:e.brandname})]}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.impressions/1e3,3)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.clicks,0)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.leads,0)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.ctr,2)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.cr,2)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.price,3)}),Object(I.jsx)(N.a.Cell,{className:"tar monoFont",children:A(e.income,3)}),Object(I.jsxs)(N.a.Cell,{className:"tar monoFont",positive:e.revenue>0,negative:e.revenue<0,children:[e.revenue>0?"+":"",A(e.revenue,3)]}),Object(I.jsxs)(N.a.Cell,{className:"tar monoFont",style:{cursor:"pointer"},positive:e.roi>0,negative:e.roi<0,onClick:function(){return le("c-"+e.id)},children:[e.revenue>0?"+":"",A(e.roi,2)]})]},"creative-"+e.id))})),xe.push(a)})),pe.ctr=L(pe.impressions,pe.clicks),pe.cr=L(pe.clicks,pe.leads),pe.ecpc=z(pe.clicks,pe.price),pe.ecpa=T(pe.leads,pe.price),pe.revenue=H(pe.impressions,pe.price,pe.income),pe.roi=E(pe.impressions,pe.leads,pe.price,pe.revenue),Object(I.jsxs)(I.Fragment,{children:[P&&Object(I.jsxs)(f.a,{inverted:!0,color:"red",onClick:function(){return V(null)},children:[Object(I.jsx)(g.a,{onClick:function(){return V(null)},floated:"right",color:"red",icon:"close",size:"tiny",style:{marginTop:"-6px"}}),Object(I.jsx)("p",{children:P})]}),Object(I.jsx)(De,{stats:b.rowsCount>0&&pe}),Object(I.jsxs)(f.a,{loading:y,style:{padding:"0",border:"0"},children:[Object(I.jsxs)(m.a,{attached:"top",children:[Object(I.jsxs)(m.a.Item,{children:[Object(I.jsx)(Fe.DateInput,{style:{width:"133px"},disabled:y,placeholder:"Date From",dateFormat:_,value:r.from,iconPosition:"left",maxDate:r.to,onChange:function(e,t){return c(Object(i.a)(Object(i.a)({},r),{},{from:t.value}))}}),Object(I.jsx)(Fe.DateInput,{style:{width:"133px",marginLeft:"5px"},disabled:y,placeholder:"Date To",dateFormat:_,value:r.to,iconPosition:"left",minDate:r.from,maxDate:Te().format(_),onChange:function(e,t){return c(Object(i.a)(Object(i.a)({},r),{},{to:t.value}))}})]}),Object(I.jsx)(m.a.Item,{children:Object(I.jsx)(we.a,{placeholder:"State",compact:!0,style:{width:"120px"},onChange:function(e,t){return se(t.value)},value:ce,selection:!0,options:[{key:"all",text:"All",value:"all"},{key:"active",text:"Active",value:"active"},{key:"disabled",text:"Disabled",value:"disabled"},{key:"pending",text:"Pending",value:"pending"}]})}),Object(I.jsxs)(m.a.Menu,{position:"right",children:[Object(I.jsx)(m.a.Item,{children:Object(I.jsx)(k.a,{placeholder:"Search",style:{width:"240px"},value:s,onChange:function(e){return l(e.target.value)}})}),Object(I.jsxs)(m.a.Item,{disabled:y,onClick:function(){return ie(!0)},children:[Object(I.jsx)(O.a,{name:"refresh",color:"violet"}),"Load Data"]}),Object(I.jsxs)(m.a.Item,{disabled:y,onClick:function(){return ie()},children:[Object(I.jsx)(O.a,{name:"refresh",color:"blue"}),"Load Stats"]})]})]}),Object(I.jsxs)(N.a,{compact:!0,striped:!0,sortable:!0,celled:!0,selectable:!0,attached:"bottom",children:[Object(I.jsx)(N.a.Header,{children:Object(I.jsxs)(N.a.Row,{children:[Object(I.jsx)(D,{sort:te,onSort:oe,style:{width:"65px"},prop:"active",title:"Active"}),Object(I.jsx)(D,{sort:te,onSort:oe,style:{width:"80px"},prop:"id",title:"ID"}),Object(I.jsx)(D,{sort:te,onSort:oe,prop:"name",title:"Name"}),Object(I.jsx)(D,{sort:te,onSort:oe,style:{width:"90px"},prop:"impressions",title:"Imprs"}),Object(I.jsx)(D,{sort:te,onSort:oe,style:{width:"85px"},prop:"clicks",title:"Clicks"}),Object(I.jsx)(D,{sort:te,onSort:oe,style:{width:"85px"},prop:"leads",title:"Leads"}),Object(I.jsx)(D,{sort:te,onSort:oe,style:{width:"85px"},prop:"ctr",title:"CTR %"}),Object(I.jsx)(D,{sort:te,onSort:oe,style:{width:"85px"},prop:"cr",title:"CR %"}),Object(I.jsx)(D,{sort:te,onSort:oe,style:{width:"85px"},prop:"price",title:"Price"}),Object(I.jsx)(D,{sort:te,onSort:oe,style:{width:"85px"},prop:"income",title:"Income"}),Object(I.jsx)(D,{sort:te,onSort:oe,style:{width:"85px"},prop:"revenue",title:"Revenue"}),Object(I.jsx)(D,{sort:te,onSort:oe,style:{width:"85px"},prop:"roi",title:"ROI %"})]})}),Object(I.jsx)(N.a.Body,{children:ve()(me,te[0],te[1]?"asc":"desc").map((function(e){return xe[e.bannerIndex]}))}),Object(I.jsx)(N.a.Footer,{children:Object(I.jsxs)(N.a.Row,{children:[Object(I.jsxs)(N.a.HeaderCell,{colSpan:3,children:["Count: ",me.length]}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:d()(pe.impressions/1e3,3).toFixed(3)}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:pe.clicks}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:pe.leads}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:pe.ctr.toFixed(2)}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:pe.cr.toFixed(2)}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:d()(pe.price,3).toFixed(3)}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:d()(pe.income,3).toFixed(3)}),Object(I.jsx)(N.a.HeaderCell,{className:"tar monoFont",children:(pe.revenue>0?"+":"")+d()(pe.revenue,3).toFixed(3)}),Object(I.jsxs)(N.a.HeaderCell,{className:"tar monoFont",children:[(pe.roi>0?"+":"")+d()(pe.roi,2),"%"]})]})})]})]})]})},Ee=Object(h.extendMoment)(b.a);var Pe=function(){var e=Date.now(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(null),l=Object(o.a)(s,2),u=l[0],p=l[1],b=Object(a.useState)(null),h=Object(o.a)(b,2),w=h[0],F=h[1],N=Object(a.useState)(!1),A=Object(o.a)(N,2),D=A[0],L=A[1],R=Object(a.useState)(!0),z=Object(o.a)(R,2),T=z[0],H=z[1],E=Object(a.useState)(0),P=Object(o.a)(E,2),V=P[0],M=P[1],Q=Object(a.useState)("campaigns"),B=Object(o.a)(Q,2),$=B[0],G=B[1],K=Object(a.useState)(j.a.get("tsapp.auth")||{}),U=Object(o.a)(K,2),Y=U[0],J=U[1],q=Object(a.useState)({from:Ee().format(_),to:Ee().format(_)}),W=Object(o.a)(q,2),X=W[0],Z=W[1],ee=Object(a.useState)(""),te=Object(o.a)(ee,2),ne=te[0],ae=te[1];function re(t){M(e),G(t)}Object(a.useEffect)((function(){return r||w||u?null:Y.token?void 0:(D||L(!0),null)}),[r,u,Y,w,D]);var ce=d()((Y.ttl-e)/1e3),se=Ee.duration(ce%3600>0?ce:ce-1,"seconds"),ie=se.get("minutes"),oe=se.humanize(!0);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(m.a,{fluid:!0,attached:"top",inverted:!0,style:{borderRadius:"0"},children:[Object(I.jsx)(m.a.Item,{header:!0,children:"TSapp"}),Object(I.jsxs)(m.a.Item,{children:[Object(I.jsx)(O.a,{color:ie>=30?"green":ie>=8?"orange":"red",name:"key"}),"expires ",oe]}),Y.clientId&&Y.clientSecret&&Y.tokenRefresh&&Object(I.jsxs)(m.a.Item,{disabled:r,onClick:function(){return function(){if(!(Y.clientId&&Y.clientSecret&&Y.tokenRefresh))return null;c(!0),fe.authRefresh(Y.clientId,Y.clientSecret,Y.tokenRefresh).then((function(e){var t=Object(i.a)(Object(i.a)({},Y),e);T&&j.a.set("tsapp.auth",t),J(t),c(!1)})).catch((function(e){J(Object(i.a)(Object(i.a)({},Y),{},{token:"",tokenRefresh:"",ttl:0})),F(e.toString()),c(!1)}))}()},children:[Object(I.jsx)(O.a,{name:"refresh",color:ie>=8?null:"green"}),"Refresh token"]}),Object(I.jsxs)(m.a.Menu,{position:"right",children:[Object(I.jsxs)(m.a.Item,{disabled:r,active:"campaigns"===$,onClick:function(){return re("campaigns")},children:[Object(I.jsx)(O.a,{name:"suitcase"}),"Campaigns"]}),Object(I.jsxs)(m.a.Item,{disabled:r,active:"banners"===$,onClick:function(){return re("banners")},children:[Object(I.jsx)(O.a,{name:"picture"}),"Banners"]})]})]}),Object(I.jsxs)(x.a,{className:"App",fluid:!0,style:{padding:"25px 25px 55px 25px"},children:[u&&Object(I.jsxs)(f.a,{inverted:!0,color:"red",onClick:function(){return p(null)},children:[Object(I.jsx)(g.a,{onClick:function(){return p(null)},floated:"right",color:"red",icon:"close",size:"tiny",style:{marginTop:"-6px"}}),Object(I.jsx)("p",{children:u})]}),"campaigns"===$&&Object(I.jsx)(Re,{switchStamp:V,auth:Y,dates:X,setDates:Z,searchQuery:ne,setSearchQuery:ae}),"banners"===$&&Object(I.jsx)(He,{switchStamp:V,auth:Y,dates:X,setDates:Z,searchQuery:ne,setSearchQuery:ae})]}),Object(I.jsxs)(v.a,{open:D,children:[Object(I.jsx)(v.a.Header,{children:"Auth"}),Object(I.jsxs)(v.a.Content,{children:[w&&Object(I.jsxs)(f.a,{inverted:!0,color:"red",onClick:function(){return F(null)},children:[Object(I.jsx)(g.a,{onClick:function(){return F(null)},floated:"right",color:"red",icon:"close",size:"tiny",style:{marginTop:"-6px"}}),Object(I.jsx)("p",{children:w})]}),Object(I.jsx)(y.a,{panes:[{menuItem:"TrafficStars",render:function(){return Object(I.jsx)(y.a.Pane,{children:Object(I.jsxs)(C.a,{children:[Object(I.jsxs)(C.a.Field,{children:[Object(I.jsx)("label",{children:"Client ID"}),Object(I.jsx)(k.a,{placeholder:"TS client ID",value:Y.clientId||"",onChange:function(e){return J(Object(i.a)(Object(i.a)({},Y),{},{clientId:e.target.value}))}})]}),Object(I.jsxs)(C.a.Field,{children:[Object(I.jsx)("label",{children:"Client Secret"}),Object(I.jsx)(k.a,{placeholder:"TS client Secret",value:Y.clientSecret||"",onChange:function(e){return J(Object(i.a)(Object(i.a)({},Y),{},{clientSecret:e.target.value}))}})]}),Object(I.jsxs)(C.a.Field,{children:[Object(I.jsx)("label",{children:"Login"}),Object(I.jsx)(k.a,{placeholder:"Login",value:Y.login||"",onChange:function(e){return J(Object(i.a)(Object(i.a)({},Y),{},{login:e.target.value}))}})]}),Object(I.jsxs)(C.a.Field,{children:[Object(I.jsx)("label",{children:"Password"}),Object(I.jsx)(k.a,{type:"password",placeholder:"Password",value:Y.password||"",onChange:function(e){return J(Object(i.a)(Object(i.a)({},Y),{},{password:e.target.value}))}})]})]})})}},{menuItem:"ClickDealer",disabled:!0,render:function(){return Object(I.jsx)(y.a.Pane,{children:Object(I.jsx)(C.a,{children:Object(I.jsxs)(C.a.Field,{children:[Object(I.jsx)("label",{children:"Api Key"}),Object(I.jsx)(k.a,{placeholder:"CD api Key",disabled:!0,value:Y.apiKey||"",onChange:function(e){return J(Object(i.a)(Object(i.a)({},Y),{},{apiKey:e.target.value}))}})]})})})}}]}),Object(I.jsx)("br",{}),Object(I.jsx)(C.a,{children:Object(I.jsx)(C.a.Field,{children:Object(I.jsx)(S.a,{checked:!!T,onChange:function(){return H(!T)},label:"Save credentials in local storage"})})})]}),Object(I.jsx)(v.a.Actions,{children:Object(I.jsx)(g.a,{type:"submit",color:"green",onClick:function(){return function(){if(!(Y.clientId&&Y.clientSecret&&Y.login&&Y.password))return J(Object(i.a)(Object(i.a)({},Y),{},{tokenRefresh:""})),null;c(!0),fe.auth(Y.clientId,Y.clientSecret,Y.login,Y.password).then((function(e){var t=Object(i.a)(Object(i.a)({},Y),e);T&&j.a.set("tsapp.auth",t),J(t),t.token&&L(!1),c(!1)})).catch((function(e){J(Object(i.a)(Object(i.a)({},Y),{},{tokenRefresh:""})),F(e.toString()),c(!1)}))}()},children:"Auth"})})]})]})},Ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,609)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(Pe,{})}),document.getElementById("root")),Ve()}},[[550,1,2]]]);
//# sourceMappingURL=main.a424aa34.chunk.js.map